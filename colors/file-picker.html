<!DOCTYPE html>
<html>
<head>
</head>

<body>

<input type="file">
<div id="list"></div>

<script>
// https://dribbble.com/shots/1520964-Dashboard?list=shots&sort=popular&timeframe=now&offset=66
// http://www.adobe.com/devnet-apps/photoshop/fileformatashtml/#50577411_pgfId-1055819
function handleFileSelect(evt) {
  var file = evt.target.files[0];

  var reader = new FileReader();
  reader.onload = function() {
    var binary = reader.result;

    var count = binary.charCodeAt(3);
    var ratio = 255/65535;

    for (var i = 0; i < count; i++) {
      var padding = i*10 + 4;
      var color = binary.substring(padding, padding + 10);
      color = color.substring(2, 8);

      var r, g, b;
      r = color.substring(0, 2);
      r = (r.charCodeAt(0) << 8) | r.charCodeAt(1);
      g = color.substring(2, 4);
      g = (g.charCodeAt(0) << 8) | g.charCodeAt(1);
      b = color.substring(4, 6);
      b = (b.charCodeAt(0) << 8) | b.charCodeAt(1);

      var div = document.createElement('div');
      div.style.width = '80px';
      div.style.height = '30px';
      div.style.float = 'left';
      div.style.background = 'rgb(' + [Math.floor(r*ratio), Math.floor(g*ratio), Math.floor(b*ratio)] +')';
      document.body.appendChild(div);

    }

    window.b = binary;
  }

  reader.readAsBinaryString(file);
}

document.getElementsByTagName('input')[0].addEventListener('change', handleFileSelect, false);
</script>
</body>
</html>
